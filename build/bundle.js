var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function l(e){e.forEach(t)}function s(e){return"function"==typeof e}function c(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(e,t){e.appendChild(t)}function a(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode.removeChild(e)}function i(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function r(e){return document.createElement(e)}function d(e){return document.createTextNode(e)}function f(){return d(" ")}function h(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function p(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function g(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function m(e,t){e.value=null==t?"":t}let v;function b(e){v=e}function $(){const e=function(){if(!v)throw new Error("Function called outside component initialization");return v}();return(t,n)=>{const l=e.$$.callbacks[t];if(l){const s=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);l.slice().forEach((t=>{t.call(e,s)}))}}}const y=[],k=[],_=[],w=[],x=Promise.resolve();let A=!1;function q(e){_.push(e)}function C(e){w.push(e)}let E=!1;const T=new Set;function L(){if(!E){E=!0;do{for(let e=0;e<y.length;e+=1){const t=y[e];b(t),S(t.$$)}for(b(null),y.length=0;k.length;)k.pop()();for(let e=0;e<_.length;e+=1){const t=_[e];T.has(t)||(T.add(t),t())}_.length=0}while(y.length);for(;w.length;)w.pop()();A=!1,E=!1,T.clear()}}function S(e){if(null!==e.fragment){e.update(),l(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(q)}}const z=new Set;let M;function U(){M={r:0,c:[],p:M}}function j(){M.r||l(M.c),M=M.p}function H(e,t){e&&e.i&&(z.delete(e),e.i(t))}function D(e,t,n,l){if(e&&e.o){if(z.has(e))return;z.add(e),M.c.push((()=>{z.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}}function F(e,t,n){const l=e.$$.props[t];void 0!==l&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function N(e){e&&e.c()}function B(e,n,c){const{fragment:o,on_mount:a,on_destroy:u,after_update:i}=e.$$;o&&o.m(n,c),q((()=>{const n=a.map(t).filter(s);u?u.push(...n):l(n),e.$$.on_mount=[]})),i.forEach(q)}function O(e,t){const n=e.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function I(e,t){-1===e.$$.dirty[0]&&(y.push(e),A||(A=!0,x.then(L)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function P(t,s,c,o,a,i,r=[-1]){const d=v;b(t);const f=s.props||{},h=t.$$={fragment:null,ctx:null,props:i,update:e,not_equal:a,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:r,skip_bound:!1};let p=!1;if(h.ctx=c?c(t,f,((e,n,...l)=>{const s=l.length?l[0]:n;return h.ctx&&a(h.ctx[e],h.ctx[e]=s)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](s),p&&I(t,e)),n})):[],h.update(),p=!0,l(h.before_update),h.fragment=!!o&&o(h.ctx),s.target){if(s.hydrate){const e=function(e){return Array.from(e.childNodes)}(s.target);h.fragment&&h.fragment.l(e),e.forEach(u)}else h.fragment&&h.fragment.c();s.intro&&H(t.$$.fragment),B(t,s.target,s.anchor),L()}b(d)}class Q{$destroy(){O(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function R(t){let n,l,s,c,i,m,v;return{c(){n=r("span"),l=r("label"),s=r("input"),c=f(),i=d(t[2]),p(s,"type","checkbox"),s.disabled=t[0],s.checked=t[1],p(l,"class","checkbox"),p(n,"class","mr-4")},m(e,u){a(e,n,u),o(n,l),o(l,s),o(l,c),o(l,i),m||(v=h(s,"change",t[3]),m=!0)},p(e,[t]){1&t&&(s.disabled=e[0]),2&t&&(s.checked=e[1]),4&t&&g(i,e[2])},i:e,o:e,d(e){e&&u(n),m=!1,v()}}}function G(e,t,n){let{disabled:l}=t,{checked:s}=t,{value:c}=t,{label:o}=t;const a=$();return e.$$set=e=>{"disabled"in e&&n(0,l=e.disabled),"checked"in e&&n(1,s=e.checked),"value"in e&&n(4,c=e.value),"label"in e&&n(2,o=e.label)},[l,s,o,function(e){a("change",{checked:e.target.checked,value:c})},c]}class X extends Q{constructor(e){super(),P(this,e,G,R,c,{disabled:0,checked:1,value:4,label:2})}}function J(t){let n,l,s,c,i,m,v,b,$,y,k=(t[0]&&t[0].length?t[0][0].name:"")+"";return{c(){n=r("div"),l=r("label"),s=r("input"),c=f(),i=r("span"),i.innerHTML='<span class="file-label">Choose file</span>',m=f(),v=r("span"),b=d(k),p(s,"class","file-input"),p(s,"type","file"),p(s,"name","file"),p(s,"accept",t[1]),p(i,"class","file-cta"),p(v,"class","file-name"),p(l,"class","file-label"),p(n,"class","file has-name is-fullwidth is-right")},m(e,u){a(e,n,u),o(n,l),o(l,s),o(l,c),o(l,i),o(l,m),o(l,v),o(v,b),$||(y=h(s,"change",t[2]),$=!0)},p(e,[t]){2&t&&p(s,"accept",e[1]),1&t&&k!==(k=(e[0]&&e[0].length?e[0][0].name:"")+"")&&g(b,k)},i:e,o:e,d(e){e&&u(n),$=!1,y()}}}function K(e,t,n){let{accept:l}=t,{files:s}=t;return e.$$set=e=>{"accept"in e&&n(1,l=e.accept),"files"in e&&n(0,s=e.files)},[s,l,function(){s=this.files,n(0,s)}]}class V extends Q{constructor(e){super(),P(this,e,K,J,c,{accept:1,files:0})}}function W(t){let n,l,s,c,i,m,v;return{c(){n=r("span"),l=r("label"),s=r("input"),c=f(),i=d(t[2]),p(s,"type","radio"),s.__value=t[1],s.value=s.__value,t[4][0].push(s),p(l,"class","radio"),p(n,"class","mr-4")},m(e,u){a(e,n,u),o(n,l),o(l,s),s.checked=s.__value===t[0],o(l,c),o(l,i),m||(v=h(s,"change",t[3]),m=!0)},p(e,[t]){2&t&&(s.__value=e[1],s.value=s.__value),1&t&&(s.checked=s.__value===e[0]),4&t&&g(i,e[2])},i:e,o:e,d(e){e&&u(n),t[4][0].splice(t[4][0].indexOf(s),1),m=!1,v()}}}function Y(e,t,n){let{group:l}=t,{value:s}=t,{label:c}=t;return e.$$set=e=>{"group"in e&&n(0,l=e.group),"value"in e&&n(1,s=e.value),"label"in e&&n(2,c=e.label)},[l,s,c,function(){l=this.__value,n(0,l)},[[]]]}class Z extends Q{constructor(e){super(),P(this,e,Y,W,c,{group:0,value:1,label:2})}}const ee=["eng","svk","cze"];function te(e,t){var n=[],l=e.size;function s(t,l,s){var c=new FileReader;c.onload=function(e){s.call(c,function(e){for(var t=0;t<e.length;t++)n[(t+8)%8]+=e.charCodeAt(t)}(e.target.result))},void 0===l?c.readAsBinaryString(e.slice(t)):c.readAsBinaryString(e.slice(t,l))}for(var c=0;c<8;c++)n[c]=255&l,l>>=8;s(0,65536,(function(){s(e.size-65536,void 0,(function(){t.call(null,e,function(e){var t=255,n="0123456789abcdef",l="",s=7;for(e[1]+=e[0]>>8,e[0]=e[0]&t,e[2]+=e[1]>>8,e[1]=e[1]&t,e[3]+=e[2]>>8,e[2]=e[2]&t,e[4]+=e[3]>>8,e[3]=e[3]&t,e[5]+=e[4]>>8,e[4]=e[4]&t,e[6]+=e[5]>>8,e[5]=e[5]&t,e[7]+=e[6]>>8,e[6]=e[6]&t,e[7]=e[7]&t;s>-1;s--)l+=n.charAt(e[s]>>4&15)+n.charAt(15&e[s]);return l}(n))}))}))}const ne=({url:e,userAgent:t,languages:n})=>Promise.all(n.map((n=>fetch(`${e}/sublanguageid-${n}`,{method:"GET",headers:{"Content-Type":"application/json","X-User-Agent":t}}).then((e=>e.json()))))).then((e=>e.flatMap((e=>e)).map((e=>({added:e.SubAddDate.substr(0,10),name:e.SubFileName,downloadCount:parseInt(e.SubDownloadsCnt),downloadUrl:e.SubDownloadLink})))));function le(e,t,n){const l=e.slice();return l[15]=t[n],l[17]=n,l}function se(e,t,n){const l=e.slice();return l[18]=t[n],l}function ce(e){let t,n;return t=new X({props:{disabled:1===e[1].length&&e[1].includes(e[18]),checked:e[1].includes(e[18]),value:e[18],label:e[18].toUpperCase()}}),t.$on("change",e[9]),{c(){N(t.$$.fragment)},m(e,l){B(t,e,l),n=!0},p(e,n){const l={};2&n&&(l.disabled=1===e[1].length&&e[1].includes(e[18])),2&n&&(l.checked=e[1].includes(e[18])),t.$set(l)},i(e){n||(H(t.$$.fragment,e),n=!0)},o(e){D(t.$$.fragment,e),n=!1},d(e){O(t,e)}}}function oe(t){let n,l,s,c,i,g,v,b,$,y,k,_;return{c(){n=r("div"),l=r("div"),l.innerHTML='<label class="label" for="query">Query:</label>',s=f(),c=r("div"),i=r("input"),g=f(),v=r("div"),b=r("button"),$=d("Search"),p(l,"class","column is-2"),p(i,"class","input"),p(i,"type","text"),p(i,"name","query"),p(c,"class","column is-8"),p(b,"class","button is-fullwidth is-primary"),p(b,"type","submit"),b.disabled=y=!t[3].length,p(v,"class","column is-2"),p(n,"class","columns level")},m(e,u){a(e,n,u),o(n,l),o(n,s),o(n,c),o(c,i),m(i,t[3]),o(n,g),o(n,v),o(v,b),o(b,$),k||(_=h(i,"input",t[13]),k=!0)},p(e,t){8&t&&i.value!==e[3]&&m(i,e[3]),8&t&&y!==(y=!e[3].length)&&(b.disabled=y)},i:e,o:e,d(e){e&&u(n),k=!1,_()}}}function ae(e){let t,n,l,s,c,i,d;function h(t){e[12].call(null,t)}let g={accept:"video/*"};return void 0!==e[4]&&(g.files=e[4]),c=new V({props:g}),k.push((()=>F(c,"files",h))),{c(){t=r("div"),n=r("div"),n.innerHTML='<label class="label" for="query">File:</label>',l=f(),s=r("div"),N(c.$$.fragment),p(n,"class","column is-2"),p(s,"class","column is-10"),p(t,"class","columns level")},m(e,u){a(e,t,u),o(t,n),o(t,l),o(t,s),B(c,s,null),d=!0},p(e,t){const n={};!i&&16&t&&(i=!0,n.files=e[4],C((()=>i=!1))),c.$set(n)},i(e){d||(H(c.$$.fragment,e),d=!0)},o(e){D(c.$$.fragment,e),d=!1},d(e){e&&u(t),O(c)}}}function ue(e){let t,n,s,c,d,g,m,v,b,$,y,k,_,w,x,A,q,C=e[5],E=[];for(let t=0;t<C.length;t+=1)E[t]=ie(le(e,C,t));return{c(){t=r("div"),n=r("table"),s=r("thead"),c=r("tr"),d=r("th"),d.textContent="#",g=f(),m=r("th"),m.textContent="Added",v=f(),b=r("th"),b.textContent="Downloaded",$=f(),y=r("th"),y.textContent="Name",k=f(),_=r("th"),w=f(),x=r("tbody");for(let e=0;e<E.length;e+=1)E[e].c();p(d,"class","svelte-1kd87q2"),p(m,"class","is-clickable svelte-1kd87q2"),p(b,"class","is-clickable svelte-1kd87q2"),p(y,"class","svelte-1kd87q2"),p(_,"class","svelte-1kd87q2"),p(n,"class","table is-narrow is-fullwidth is-hoverable svelte-1kd87q2"),p(t,"class","section")},m(l,u){a(l,t,u),o(t,n),o(n,s),o(s,c),o(c,d),o(c,g),o(c,m),o(c,v),o(c,b),o(c,$),o(c,y),o(c,k),o(c,_),o(n,w),o(n,x);for(let e=0;e<E.length;e+=1)E[e].m(x,null);A||(q=[h(m,"click",e[6]("added")),h(b,"click",e[6]("downloadCount"))],A=!0)},p(e,t){if(32&t){let n;for(C=e[5],n=0;n<C.length;n+=1){const l=le(e,C,n);E[n]?E[n].p(l,t):(E[n]=ie(l),E[n].c(),E[n].m(x,null))}for(;n<E.length;n+=1)E[n].d(1);E.length=C.length}},d(e){e&&u(t),i(E,e),A=!1,l(q)}}}function ie(e){let t,n,l,s,c,i,h,m,v,b,$,y,k,_,w,x,A,q,C=e[17]+1+"",E=e[15].added+"",T=e[15].downloadCount+"",L=e[15].name+"";return{c(){t=r("tr"),n=r("td"),l=d(C),s=f(),c=r("td"),i=d(E),h=f(),m=r("td"),v=d(T),b=f(),$=r("td"),y=d(L),k=f(),_=r("td"),w=r("a"),x=d("Download"),q=f(),p(n,"class","svelte-1kd87q2"),p(c,"class","svelte-1kd87q2"),p(m,"class","svelte-1kd87q2"),p($,"class","svelte-1kd87q2"),p(w,"class","button"),p(w,"href",A=e[15].downloadUrl),p(_,"class","svelte-1kd87q2")},m(e,u){a(e,t,u),o(t,n),o(n,l),o(t,s),o(t,c),o(c,i),o(t,h),o(t,m),o(m,v),o(t,b),o(t,$),o($,y),o(t,k),o(t,_),o(_,w),o(w,x),o(t,q)},p(e,t){32&t&&E!==(E=e[15].added+"")&&g(i,E),32&t&&T!==(T=e[15].downloadCount+"")&&g(v,T),32&t&&L!==(L=e[15].name+"")&&g(y,L),32&t&&A!==(A=e[15].downloadUrl)&&p(w,"href",A)},d(e){e&&u(t)}}}function re(e){let t,n,s,c,d,g,v,b,$,y,_,w,x,A,q,E,T,L,S,z,M,I,P,Q,R,G,X,J,K,V,W=ee,Y=[];for(let t=0;t<W.length;t+=1)Y[t]=ce(se(e,W,t));const te=e=>D(Y[e],1,1,(()=>{Y[e]=null}));function ne(t){e[10].call(null,t)}let le={value:!0,label:"File"};function ie(t){e[11].call(null,t)}void 0!==e[2]&&(le.group=e[2]),S=new Z({props:le}),k.push((()=>F(S,"group",ne)));let re={value:!1,label:"Query"};void 0!==e[2]&&(re.group=e[2]),I=new Z({props:re}),k.push((()=>F(I,"group",ie)));const de=[ae,oe],fe=[];function he(e,t){return e[2]?0:1}R=he(e),G=fe[R]=de[R](e);let pe=e[5].length&&ue(e);return{c(){t=r("div"),n=r("div"),s=r("form"),c=r("div"),d=r("div"),d.innerHTML='<label class="label" for="userAgent">User Agent:</label>',g=f(),v=r("div"),b=r("input"),$=f(),y=r("div"),_=r("div"),_.innerHTML='<label class="label" for="language">Languages:</label>',w=f(),x=r("div");for(let e=0;e<Y.length;e+=1)Y[e].c();A=f(),q=r("div"),E=r("div"),E.innerHTML='<label class="label" for="query">Search by:</label>',T=f(),L=r("div"),N(S.$$.fragment),M=f(),N(I.$$.fragment),Q=f(),G.c(),X=f(),pe&&pe.c(),p(d,"class","column is-2"),p(b,"class","input"),p(b,"type","text"),p(b,"name","userAgent"),p(v,"class","column is-10"),p(c,"class","columns level"),p(_,"class","column is-2"),p(x,"class","column is-10"),p(y,"class","columns"),p(E,"class","column is-2"),p(L,"class","column is-10"),p(q,"class","columns level"),p(s,"action","javascript:void(0);"),p(n,"class","section"),p(t,"class","container")},m(l,u){a(l,t,u),o(t,n),o(n,s),o(s,c),o(c,d),o(c,g),o(c,v),o(v,b),m(b,e[0]),o(s,$),o(s,y),o(y,_),o(y,w),o(y,x);for(let e=0;e<Y.length;e+=1)Y[e].m(x,null);o(s,A),o(s,q),o(q,E),o(q,T),o(q,L),B(S,L,null),o(L,M),B(I,L,null),o(s,Q),fe[R].m(s,null),o(t,X),pe&&pe.m(t,null),J=!0,K||(V=[h(b,"input",e[8]),h(s,"submit",e[7])],K=!0)},p(e,[n]){if(1&n&&b.value!==e[0]&&m(b,e[0]),2&n){let t;for(W=ee,t=0;t<W.length;t+=1){const l=se(e,W,t);Y[t]?(Y[t].p(l,n),H(Y[t],1)):(Y[t]=ce(l),Y[t].c(),H(Y[t],1),Y[t].m(x,null))}for(U(),t=W.length;t<Y.length;t+=1)te(t);j()}const l={};!z&&4&n&&(z=!0,l.group=e[2],C((()=>z=!1))),S.$set(l);const c={};!P&&4&n&&(P=!0,c.group=e[2],C((()=>P=!1))),I.$set(c);let o=R;R=he(e),R===o?fe[R].p(e,n):(U(),D(fe[o],1,1,(()=>{fe[o]=null})),j(),G=fe[R],G||(G=fe[R]=de[R](e),G.c()),H(G,1),G.m(s,null)),e[5].length?pe?pe.p(e,n):(pe=ue(e),pe.c(),pe.m(t,null)):pe&&(pe.d(1),pe=null)},i(e){if(!J){for(let e=0;e<W.length;e+=1)H(Y[e]);H(S.$$.fragment,e),H(I.$$.fragment,e),H(G),J=!0}},o(e){Y=Y.filter(Boolean);for(let e=0;e<Y.length;e+=1)D(Y[e]);D(S.$$.fragment,e),D(I.$$.fragment,e),D(G),J=!1},d(e){e&&u(t),i(Y,e),O(S),O(I),fe[R].d(),pe&&pe.d(),K=!1,l(V)}}}function de(e,t,n){let l,s="TemporaryUserAgent",c=ee,o=!0,a="",u=[];const i=()=>{te(l[0],((e,t)=>{console.log(e,"h",t),(({userAgent:e,languages:t,hash:n,size:l})=>ne({userAgent:e,languages:t,url:"https://rest.opensubtitles.org/search/moviebytesize-"+l+"/moviehash-"+n}))({userAgent:s,languages:c,hash:t,size:e.size}).then((e=>{n(5,u=e)}))}))};return e.$$.update=()=>{4&e.$$.dirty&&(o?n(3,a=""):n(4,l=null)),16&e.$$.dirty&&l&&l.length&&i(l[0])},[s,c,o,a,l,u,e=>{let t="",l=-1;return()=>{let s;t===e&&(l*=-1),t=e;const c=typeof u[0][e];"string"===c?s=(t,n)=>t[e].localeCompare(n[e])*l:"number"===c&&(s=(t,n)=>(t[e]-n[e])*l),u.sort(s),n(5,u)}},async()=>{n(5,u=await(({userAgent:e,languages:t,query:n})=>ne({userAgent:e,languages:t,url:"https://rest.opensubtitles.org/search/query-"+encodeURIComponent(n)}))({userAgent:s,languages:c,query:a}))},function(){s=this.value,n(0,s)},e=>{const{checked:t,value:l}=e.detail;n(1,c=t?[...c,l]:c.filter((e=>e!==l)))},function(e){o=e,n(2,o)},function(e){o=e,n(2,o)},function(e){l=e,n(4,l),n(2,o)},function(){a=this.value,n(3,a),n(2,o)}]}return new class extends Q{constructor(e){super(),P(this,e,de,re,c,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
